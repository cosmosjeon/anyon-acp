# PRD 워크플로우 프롬프트 로직 분석 및 예시

## 1. PRD 프롬프트가 들어가는 로직 흐름

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  사용자가 "PRD 작성 시작" 버튼 클릭                                           │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  PlanningDocsPanel.tsx                                                       │
│  handleStartWorkflow(step) 호출                                              │
│  - step = { id: 'prd', prompt: STARTUP_PRD_PROMPT, ... }                    │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  planning.ts                                                                 │
│  getWorkflowPrompt(step) 호출                                                │
│  → step.prompt ?? step.workflow                                              │
│  → STARTUP_PRD_PROMPT 반환 (약 550줄의 상세 프롬프트)                         │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  PlanningDocsPanel.tsx                                                       │
│  onStartNewWorkflow(workflowPrompt) 호출                                     │
│  → 부모 컴포넌트(MvpWorkspace)로 프롬프트 전달                                │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  MvpWorkspace.tsx                                                            │
│  claudeSessionRef.current.startNewSession(workflowPrompt)                   │
│  → Claude Code 세션에 프롬프트 전달                                           │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  Claude Code가 STARTUP_PRD_PROMPT 실행                                       │
│  Step 0~8까지 순차적으로 진행                                                 │
│  → 사용자와 Q&A 진행                                                          │
│  → anyon-docs/planning/prd.md 파일 생성/업데이트                              │
└─────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  usePlanningDocs.ts (2초마다 폴링)                                           │
│  prd.md 파일 존재 감지 → documents 상태 업데이트                              │
│  → UI에 "완료" 배지 표시                                                      │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 핵심 파일 구조

| 파일 | 역할 |
|------|------|
| `src/constants/workflows/planning/startup-prd.ts` | PRD 프롬프트 정의 (STARTUP_PRD_PROMPT) |
| `src/constants/planning.ts` | 워크플로우 시퀀스 정의, getWorkflowPrompt() |
| `src/components/planning/PlanningDocsPanel.tsx` | UI + 워크플로우 시작 버튼 |
| `src/hooks/usePlanningDocs.ts` | 문서 상태 관리 (폴링) |

---

## 2. PRD 워크플로우 단계 구조

STARTUP_PRD_PROMPT는 **Step 0 ~ Step 8**까지 총 9단계로 구성됩니다.

| Step | 목표 | 주요 질문 |
|------|------|----------|
| Step 0 | 문서 초기화 + 인사 | - |
| Step 1 | 제품 개요 | 제품 유형, 한 줄 정의 |
| Step 2 | 핵심 문제 | 해결하려는 문제, 심각성 |
| Step 3 | 타겟 사용자 | 주요 타겟, 현재 상태, 시장 규모 |
| Step 4 | 경쟁사 분석 | WebSearch로 검색 → 직접 경쟁사, 차별화 전략 |
| Step 5 | 핵심 기능 목록 | MVP 필수 기능, v2+ 기능 |
| Step 6 | MVP 범위 | MVP 목표, 제외 항목, 완료 기준 |
| Step 7 | 사용자 플로우 | 핵심 여정, 온보딩 경험 |
| Step 8 | 최종 검토 | 요약 + 수정 여부 확인 |

---

## 3. 예시 질답 흐름 (펫시터 매칭 서비스)

### Step 0: 인사

**Claude:**
```
안녕하세요! PRD(제품 요구사항 문서) 작성을 도와드릴 비즈니스 전문가입니다.

지금부터 7개 섹션에 걸쳐 질문을 드릴 건데요, 각 질문에 번호로 답변해주시면 됩니다.
복수 선택이 가능한 질문은 쉼표로 구분해주세요. (예: 1,3,5)

작성된 내용은 실시간으로 PRD 문서에 반영됩니다.

그럼 시작하겠습니다!
```

---

### Step 1: 제품 개요

**질문 1-1: 제품 유형**

**Claude:**
```
어떤 형태의 제품을 만드시나요?

1. 웹 서비스 - 브라우저에서 바로 사용, 설치 불필요 (추천)
2. 모바일 앱 - iOS/Android 앱스토어 배포
3. 웹 + 모바일 앱 - 반응형 웹 또는 PWA로 시작
4. 데스크톱 프로그램 - Windows/Mac 설치형
5. 크롬/브라우저 확장 프로그램
6. API/백엔드 서비스 - 다른 서비스에 기능 제공
7. 기타 (직접 입력)

(복수 선택 가능)
```

**사용자:** `3`

---

**질문 1-2: 한 줄 정의**

**Claude:**
```
이 서비스를 한 문장으로 설명한다면?

1. 반려동물 보호자와 검증된 펫시터를 연결하는 매칭 플랫폼
2. 바쁜 반려인이 믿고 맡길 수 있는 펫케어 서비스
3. 동네 기반 펫시터 커뮤니티 플랫폼
4. 반려동물 돌봄 O2O 서비스
5. 기타 (직접 입력)
```

**사용자:** `1`

---

### Step 2: 핵심 문제

**질문 2-1: 해결하려는 문제**

**Claude:**
```
고객이 '돈을 내면서까지' 해결하고 싶어하는 문제는 무엇인가요?

1. 출장/여행 시 반려동물을 맡길 곳이 없어 매번 3-5만원씩 호텔비 지출
2. 지인에게 부탁하기 미안하고, 펫호텔은 스트레스 받을까 걱정됨
3. 1인 가구 증가로 갑자기 아플 때 반려동물 돌봄 공백 발생
4. 믿을 수 있는 펫시터 찾기가 어려움 (검증 부재)
5. 기타 (직접 입력)

(복수 선택 가능)
```

**사용자:** `1,2,4`

---

**질문 2-2: 문제의 심각성**

**Claude:**
```
이 문제를 방치하면 어떤 일이 벌어지나요?

1. 출장을 포기하거나 연차를 써서 집에 있어야 함
2. 반려동물이 펫호텔에서 스트레스로 건강 악화
3. 비검증 돌봄자에게 맡겨 사고 발생 시 법적 분쟁
4. 반려동물 양육 자체를 포기하는 사람 증가
5. 기타 (직접 입력)
```

**사용자:** `1,3`

---

### Step 3: 타겟 사용자

**질문 3-1: 주요 타겟**

**Claude:**
```
가장 먼저 공략할 핵심 타겟은 누구인가요?

1. 서울 거주 20-30대 1인 가구 직장인 중 반려동물 보유자
2. 출장이 잦은 30-40대 전문직 (변호사, 컨설턴트 등)
3. 맞벌이 부부 중 반려동물을 키우는 가정
4. 반려동물 보유 프리랜서/재택근무자 (긴급 상황 대비)
5. 기타 (직접 입력)

(복수 선택 가능)
```

**사용자:** `1,2`

---

**질문 3-2: 현재 해결 방식**

**Claude:**
```
이 타겟이 지금 이 문제를 어떻게 해결하고 있나요?

1. 지인/가족에게 부탁 (무료지만 미안함)
2. 펫호텔 이용 (1박 3-5만원)
3. 당근마켓/에타에서 돌봄자 찾기 (비검증)
4. 펫시터 앱 (페오펫, 도그메이트 등) 사용
5. 아예 관리 안 함 (외출 자제)
6. 기타 (직접 입력)
```

**사용자:** `1,2,3`

---

**질문 3-3: 타겟 규모**

**Claude:**
```
이 타겟이 한국에 대략 몇 명 정도 있을까요?

1. 1만 명 이하 - 니치 시장
2. 1만~10만 명 - 버티컬 SaaS 적합 (추천)
3. 10만~100만 명 - 스케일업 가능한 시장
4. 100만 명 이상 - 대중 시장, 경쟁 치열
5. 잘 모르겠음 (함께 추정해봐요)
```

**사용자:** `3`

---

### Step 4: 경쟁사 분석 (WebSearch 사용)

**Claude:** *(WebSearch 실행 후)*
```
[검색 완료] 현재 시장 상황입니다:

┌─────────────────────────────────────────────────────────────────────┐
│ 페오펫 - 펫시터 매칭, 시간당 1-2만원, MAU 10만+, 시리즈A 투자 유치   │
│ 도그메이트 - 산책/돌봄 서비스, 건당 1.5만원, 서울 중심               │
│ 펫닥 - 수의사 상담 + 돌봄 연계, 월 구독 모델                         │
│ 당근마켓 - 동네 기반 무료 매칭, 검증 시스템 없음                      │
└─────────────────────────────────────────────────────────────────────┘

이 중 직접 경쟁하게 될 서비스는?

1. 페오펫 - 가장 큰 규모, 하지만 수수료 15%로 비쌈
2. 도그메이트 - 산책 특화, 장기 돌봄은 약함
3. 당근마켓 - 무료지만 신뢰도 낮음
4. 펫호텔 - 오프라인 경쟁자
5. 위에 없음 (직접 입력)
```

**사용자:** `1,3`

---

**질문 4-2: 차별화 전략**

**Claude:**
```
페오펫, 당근마켓 대비 당신의 차별점은?

1. 페오펫은 수수료 15%인데, 우리는 5% 이하로 펫시터 수익 보장
2. 당근마켓은 검증 없는데, 우리는 범죄이력+돌봄교육 이수 필수
3. 기존 앱은 1회성인데, 우리는 단골 펫시터 구독 모델
4. 실시간 CCTV/사진 리포트로 투명한 돌봄 과정 공개
5. 기타 (직접 입력)

(복수 선택 가능)
```

**사용자:** `2,4`

---

### Step 5: 핵심 기능 목록

**질문 5-1: MVP 필수 기능**

**Claude:**
```
MVP에 반드시 들어가야 할 기능은?

1. 펫시터 검증 시스템 (신분증, 범죄이력, 교육이수) (추천)
2. 실시간 위치/사진 리포트 전송 (추천)
3. 펫시터-보호자 매칭 알고리즘
4. 채팅/화상 상담 기능
5. 결제/정산 시스템
6. 리뷰/평점 시스템
7. 펫시터 보험 연계
8. 기타 (직접 입력)

(복수 선택 가능, 3-5개 권장)
```

**사용자:** `1,2,3,5,6`

---

**질문 5-2: v2+ 기능**

**Claude:**
```
MVP 이후에 추가하고 싶은 기능은?

1. 펫시터 구독 모델 (월정액 무제한)
2. AI 매칭 추천 고도화
3. 펫시터 보험 자동 가입
4. 라이브 스트리밍 돌봄 영상
5. 동물병원 연계 서비스
6. 기타 (직접 입력)
```

**사용자:** `1,3,4`

---

### Step 6: MVP 범위

**질문 6-1: MVP 목표**

**Claude:**
```
첫 버전(MVP)으로 검증하고 싶은 것은?

1. 반려인이 실제로 펫시터 부재를 불편해하는지 (문제 검증)
2. 검증된 펫시터 매칭이 신뢰를 주는지 (솔루션 검증)
3. 1회 이용에 3-5만원 지불 의사가 있는지 (수익 검증) (추천)
4. 실시간 리포트 기능이 기술적으로 구현 가능한지 (기술 검증)
5. 기타 (직접 입력)
```

**사용자:** `3`

---

**질문 6-2: MVP 제외 항목**

**Claude:**
```
MVP에서 빼고 나중에 추가할 기능은?

1. AI 매칭 추천 (v2 권장) → 초기엔 수동 매칭
2. 라이브 스트리밍 (v2 권장) → 초기엔 사진 리포트
3. 펫시터 보험 연계 (v2 권장) → 초기엔 이용약관으로 대체
4. 화상 상담 (v2 권장) → 초기엔 채팅만
5. 없음, 모두 포함
```

**사용자:** `1,2,3`

---

**질문 6-3: MVP 완료 기준**

**Claude:**
```
MVP를 '완성'이라고 부를 수 있는 기준은?

1. 10명의 보호자가 실제 결제 완료
2. 5명의 검증된 펫시터 등록 완료
3. 첫 매칭 성사 후 NPS 8점 이상
4. 1주일 내 재이용 의사 표명 50% 이상
5. 기타 (직접 입력)

(복수 선택 가능)
```

**사용자:** `1,2`

---

### Step 7: 사용자 플로우

**질문 7-1: 핵심 여정**

**Claude:**
```
사용자가 우리 서비스에서 가장 자주 할 행동은?

1. 앱 열기 → 날짜/시간 선택 → 펫시터 검색 → 프로필 확인 → 예약 요청 → 결제
2. 알림 수신 → 돌봄 리포트 확인 → 펫시터에게 메시지 전송
3. 돌봄 완료 → 리뷰 작성 → 다음 예약 등록
4. 기타 (직접 입력)
```

**사용자:** `1`

---

**질문 7-2: 온보딩 경험**

**Claude:**
```
처음 가입한 사용자가 '아, 이거 좋다!'를 느끼는 순간은?

1. 가입 후 3분 내에 근처 검증된 펫시터 3명 이상 확인
2. 펫시터 프로필에서 범죄이력 없음 + 교육이수 배지 확인
3. 첫 돌봄 시 실시간 사진 리포트 수신
4. 첫 이용 50% 할인 쿠폰 제공
5. 기타 (직접 입력)
```

**사용자:** `1,2`

---

### Step 8: 최종 검토

**Claude:**
```
PRD 작성이 완료되었습니다! 검토 결과:

📄 **제품 개요:** 반려동물 보호자와 검증된 펫시터를 연결하는 매칭 플랫폼 (웹+앱)
🎯 **핵심 문제:** 믿고 맡길 펫시터 부재, 펫호텔 스트레스, 비검증 위험
👥 **타겟 사용자:** 서울 20-40대 직장인/전문직 반려인 (10만~100만 명)
🏢 **경쟁사:** 페오펫(수수료 高), 당근마켓(검증 無)
⚙️ **핵심 기능:** 5개 (검증시스템, 리포트, 매칭, 결제, 리뷰)
🚀 **MVP 범위:** 3개 기능 (AI/스트리밍/보험 제외)
🔄 **사용자 플로우:** 날짜선택 → 펫시터검색 → 예약 → 결제

수정이 필요한 섹션이 있나요?

1. 완료 - 이대로 확정
2. 제품 개요 수정
3. 핵심 문제 수정
4. 타겟 사용자 수정
5. 경쟁사 분석 수정
6. 핵심 기능 수정
7. MVP 범위 수정
8. 사용자 플로우 수정
```

**사용자:** `1`

---

**Claude:**
```
PRD가 완성되었습니다! 🎉

📍 저장 위치: anyon-docs/planning/prd.md

이 PRD를 바탕으로:
- UX 디자인 워크플로우 진행
- 기술 설계 (Architecture) 워크플로우 진행
- 에픽/스토리 생성 워크플로우 진행

을 추천드립니다.
```

---

## 4. 예시 결과물 (prd.md)

```markdown
# PRD (Product Requirements Document)

**작성일:** 2025-12-19

---

## 1. 제품 개요

**제품 유형:** 웹 + 모바일 앱 (반응형 웹 또는 PWA)

**한 줄 정의:** 반려동물 보호자와 검증된 펫시터를 연결하는 매칭 플랫폼

---

## 2. 핵심 문제

### 해결하려는 문제
- 출장/여행 시 반려동물을 맡길 곳이 없어 매번 3-5만원씩 호텔비 지출
- 지인에게 부탁하기 미안하고, 펫호텔은 스트레스 받을까 걱정
- 믿을 수 있는 펫시터 찾기가 어려움 (검증 부재)

### 문제 방치 시 결과
- 출장을 포기하거나 연차를 써서 집에 있어야 함
- 비검증 돌봄자에게 맡겨 사고 발생 시 법적 분쟁

---

## 3. 타겟 사용자

### 주요 타겟
- 서울 거주 20-30대 1인 가구 직장인 중 반려동물 보유자
- 출장이 잦은 30-40대 전문직 (변호사, 컨설턴트 등)

### 현재 해결 방식
- 지인/가족에게 부탁 (무료지만 미안함)
- 펫호텔 이용 (1박 3-5만원)
- 당근마켓/에타에서 돌봄자 찾기 (비검증)

### 타겟 시장 규모
- 10만~100만 명 (스케일업 가능한 시장)

---

## 4. 경쟁사 분석

### 경쟁사 현황
| 서비스 | 특징 | 가격 | 한계점 |
|--------|------|------|--------|
| 페오펫 | 펫시터 매칭 앱 | 시간당 1-2만원, 수수료 15% | 수수료 높음 |
| 도그메이트 | 산책/돌봄 서비스 | 건당 1.5만원 | 장기 돌봄 약함 |
| 당근마켓 | 동네 무료 매칭 | 무료 | 검증 시스템 없음 |
| 펫호텔 | 오프라인 숙박 | 1박 3-5만원 | 반려동물 스트레스 |

### 우리의 차별점
1. **검증된 펫시터**: 범죄이력 조회 + 돌봄 교육 이수 필수
2. **투명한 돌봄**: 실시간 CCTV/사진 리포트로 돌봄 과정 공개

---

## 5. 핵심 기능 목록

### MVP 필수 기능
1. **펫시터 검증 시스템** - 신분증, 범죄이력, 교육이수 확인
2. **실시간 리포트** - 위치/사진 리포트 전송
3. **매칭 시스템** - 펫시터-보호자 매칭
4. **결제/정산** - 안전결제 + 펫시터 정산
5. **리뷰/평점** - 이용 후 리뷰 작성

### 향후 추가 기능 (v2+)
- 펫시터 구독 모델 (월정액 무제한)
- 펫시터 보험 자동 가입
- 라이브 스트리밍 돌봄 영상

---

## 6. MVP 범위

### MVP 목표
- **수익 검증**: 1회 이용에 3-5만원 지불 의사 확인

### MVP 포함 기능
- 펫시터 검증 시스템
- 사진 리포트 (라이브 스트리밍 제외)
- 수동 매칭 (AI 매칭 제외)
- 결제/정산
- 리뷰/평점

### MVP 제외 기능
- AI 매칭 추천 → v2
- 라이브 스트리밍 → v2
- 펫시터 보험 연계 → v2

### MVP 완료 기준
- [ ] 10명의 보호자가 실제 결제 완료
- [ ] 5명의 검증된 펫시터 등록 완료

---

## 7. 사용자 플로우

### 핵심 사용자 여정
```
앱 열기 → 날짜/시간 선택 → 펫시터 검색 → 프로필 확인 → 예약 요청 → 결제
```

### 온보딩 경험
- 가입 후 3분 내에 근처 검증된 펫시터 3명 이상 확인
- 펫시터 프로필에서 "범죄이력 없음" + "교육이수" 배지 확인

---

## 부록

### 용어 정의
- **펫시터**: 반려동물 돌봄 서비스 제공자
- **보호자**: 반려동물을 키우는 사용자
- **돌봄 리포트**: 펫시터가 돌봄 중 전송하는 사진/상태 업데이트

### 변경 이력
| 날짜 | 변경 내용 | 작성자 |
|------|----------|--------|
| 2025-12-19 | 초안 작성 | 사용자 |
```
