# ERD (Entity Relationship Diagram) 워크플로우

## 개요

ERD 워크플로우는 데이터베이스의 상세 구조를 설계하는 마지막 기획 단계입니다. 어떤 데이터를 어떻게 저장할지 정의합니다.

## 파일 위치
- **프롬프트 파일**: `src/constants/workflows/planning/startup-erd.ts`
- **출력 파일**: `anyon-docs/planning/erd.md`
- **참조 파일**: 모든 이전 문서

---

## 워크플로우 진행 순서

### Step 1: 모든 이전 문서 분석

AI가 수행하는 작업:
- PRD에서 필요한 데이터 파악
- Architecture에서 DB 기술 스택 확인
- 전체 데이터 요구사항 정리

### Step 2: 엔티티(테이블) 정의

파악하는 내용:
- 필요한 테이블 목록
- 각 테이블의 목적
- 테이블 간 관계

**예시 질문**:
- 사용자 정보는 무엇을 저장해야 하나요?
- 게시글에는 어떤 정보가 필요한가요?

### Step 3: 속성(컬럼) 정의

각 테이블에 대해:
- 컬럼 이름
- 데이터 타입
- 필수 여부
- 기본값

### Step 4: 관계 정의

정의하는 내용:
- 1:1 관계 (일대일)
- 1:N 관계 (일대다)
- N:M 관계 (다대다)
- 외래키 설정

### Step 5: 인덱스 설계

정의하는 내용:
- 검색 성능을 위한 인덱스
- 유니크 제약 조건
- 복합 인덱스

### Step 6: ERD 다이어그램 생성

시각적인 다이어그램 생성:
- Mermaid 형식 ERD
- 테이블 관계 시각화

### Step 7: ERD 문서 생성

모든 정보를 종합하여 `erd.md` 파일 생성

---

## AI의 대화 스타일

### 페르소나
- **역할**: 데이터베이스 설계자
- **접근법**: 정규화와 성능의 균형
- **목표**: 이해하기 쉬운 데이터 구조

### 설명 방식
```
사용자(User) 테이블을 설계했습니다:

| 컬럼명 | 설명 | 타입 | 필수 |
|--------|------|------|------|
| id | 고유 식별자 | UUID | O |
| email | 이메일 주소 | TEXT | O |
| name | 사용자 이름 | TEXT | O |
| created_at | 가입일시 | TIMESTAMP | O |

이 구조가 적합한가요? 추가로 저장할 정보가 있나요?
```

---

## 출력 문서 구조 (erd.md)

```markdown
# [프로젝트명] ERD

## 1. 개요
- 전체 ERD 다이어그램
- 테이블 목록

## 2. 테이블 정의

### Users (사용자)
| 컬럼 | 타입 | 설명 | 제약 |
|------|------|------|------|
| id | UUID | PK | NOT NULL |
| email | TEXT | 이메일 | UNIQUE |
| ... | ... | ... | ... |

### Posts (게시글)
...

## 3. 관계 정의
- Users 1:N Posts (사용자는 여러 게시글 작성 가능)
- ...

## 4. 인덱스 전략
- users.email 유니크 인덱스
- posts.created_at 인덱스
- ...

## 5. Mermaid ERD
\`\`\`mermaid
erDiagram
    USERS ||--o{ POSTS : writes
    USERS {
        uuid id PK
        text email UK
        text name
    }
    POSTS {
        uuid id PK
        uuid user_id FK
        text title
        text content
    }
\`\`\`
```

---

## 핵심 개념 설명

### 엔티티 (Entity)
데이터베이스의 테이블입니다. 실제 세계의 객체를 나타냅니다.
예: 사용자, 게시글, 댓글

### 속성 (Attribute)
테이블의 컬럼입니다. 엔티티의 특성을 나타냅니다.
예: 이름, 이메일, 생성일

### 관계 (Relationship)
테이블 간의 연결입니다.
- **1:1**: 한 사용자는 하나의 프로필 (User ↔ Profile)
- **1:N**: 한 사용자는 여러 게시글 (User → Posts)
- **N:M**: 게시글과 태그 (Posts ↔ Tags)

### 기본키 (Primary Key, PK)
테이블에서 각 행을 고유하게 식별하는 컬럼입니다.
보통 `id` 컬럼이 기본키가 됩니다.

### 외래키 (Foreign Key, FK)
다른 테이블의 기본키를 참조하는 컬럼입니다.
테이블 간 관계를 만듭니다.

### 인덱스 (Index)
검색을 빠르게 하기 위한 목차와 같습니다.
자주 검색하는 컬럼에 인덱스를 걸면 성능이 향상됩니다.

---

## 기획 완료!

ERD 워크플로우가 완료되면 **기획문서 6개가 모두 완성**됩니다:
1. PRD (제품 요구사항)
2. UX Design (사용자 경험)
3. Design Guide (디자인 가이드)
4. TRD (기술 요구사항)
5. Architecture (시스템 구조)
6. ERD (데이터베이스 구조)

이제 **개발문서 탭**으로 이동하여 실제 개발을 시작할 수 있습니다!
