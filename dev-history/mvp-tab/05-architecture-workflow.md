# Architecture (시스템 아키텍처) 워크플로우

## 개요

Architecture 워크플로우는 TRD에서 결정한 기술들을 어떻게 구성하고 연결할지 설계하는 다섯 번째 단계입니다. 시스템의 전체 구조를 그립니다.

## 파일 위치
- **프롬프트 파일**: `src/constants/workflows/planning/startup-architecture.ts`
- **출력 파일**: `anyon-docs/planning/architecture.md`
- **참조 파일**: 모든 이전 문서 (PRD, UX, Design Guide, TRD)

---

## 워크플로우 진행 순서

### Step 1: 모든 이전 문서 분석

AI가 수행하는 작업:
- PRD의 기능 요구사항 파악
- TRD의 기술 스택 확인
- 전체 시스템 범위 이해

### Step 2: 시스템 구성 요소 정의

정의하는 내용:
- 프론트엔드 구조
- 백엔드 서비스 구조
- 데이터베이스 구조
- 외부 서비스 연동 포인트

### Step 3: 데이터 흐름 설계

정의하는 내용:
- 사용자 요청 → 서버 → DB 흐름
- 인증/인가 흐름
- 파일 업로드/다운로드 흐름
- 실시간 통신 흐름 (필요시)

### Step 4: API 엔드포인트 설계

정의하는 내용:
- 주요 API 목록
- 요청/응답 형식
- 에러 처리 방식

### Step 5: 폴더 구조 설계

정의하는 내용:
- 프로젝트 디렉토리 구조
- 코드 조직 방식
- 모듈화 전략

### Step 6: 배포 아키텍처

정의하는 내용:
- 개발/스테이징/프로덕션 환경
- 도메인 구조
- CDN/캐시 전략

### Step 7: Architecture 문서 생성

모든 정보를 종합하여 `architecture.md` 파일 생성

---

## AI의 대화 스타일

### 페르소나
- **역할**: 시스템 아키텍트
- **접근법**: 확장 가능하고 유지보수 쉬운 설계
- **목표**: 복잡한 구조를 단순하게 설명

### 설명 방식
```
시스템 구조를 쉽게 설명하면:

[사용자] 
    ↓ (웹브라우저로 접속)
[프론트엔드 - Next.js]
    ↓ (API 요청)
[백엔드 - Node.js]
    ↓ (데이터 읽기/쓰기)
[데이터베이스 - PostgreSQL]

이 흐름이 기본 구조입니다. 각 단계에 대해 자세히 설명해드릴게요.
```

---

## 출력 문서 구조 (architecture.md)

```markdown
# [프로젝트명] Architecture

## 1. 시스템 개요
- 전체 아키텍처 다이어그램
- 주요 구성 요소

## 2. 프론트엔드 아키텍처
- 컴포넌트 구조
- 상태 관리 전략
- 라우팅 구조

## 3. 백엔드 아키텍처
- 서비스 구조
- 미들웨어 구성
- 에러 처리 전략

## 4. 데이터 흐름
- 요청/응답 흐름
- 인증 흐름
- 파일 처리 흐름

## 5. API 설계
- 엔드포인트 목록
- 공통 응답 형식
- 버전 관리

## 6. 폴더 구조
- 프로젝트 디렉토리
- 네이밍 컨벤션

## 7. 배포 아키텍처
- 환경 구성
- CI/CD 파이프라인
- 모니터링
```

---

## 핵심 개념 설명

### 아키텍처
시스템의 전체적인 구조와 설계입니다. 건물로 치면 설계도와 같습니다.

### 마이크로서비스 vs 모놀리식
- **모놀리식**: 하나의 큰 앱 (시작하기 쉬움, MVP에 적합)
- **마이크로서비스**: 여러 작은 앱의 조합 (확장성 좋음, 복잡함)

### API 엔드포인트
서버와 통신하는 주소입니다.
예: `GET /api/users` - 사용자 목록 가져오기

### 폴더 구조 예시
```
src/
├── components/    # UI 컴포넌트
├── pages/         # 화면 페이지
├── api/           # API 관련 코드
├── hooks/         # 커스텀 훅
├── utils/         # 유틸리티 함수
└── types/         # 타입 정의
```

---

## 다음 단계

Architecture 완료 후 자동으로 **ERD** 워크플로우로 이동합니다.
ERD는 Architecture를 바탕으로 데이터베이스의 상세 구조를 설계합니다.
